"use strict";(self.webpackChunkcommerce_pwa_studio=self.webpackChunkcommerce_pwa_studio||[]).push([[1164],{86057:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return d},default:function(){return u}});var a=n(87462),o=n(45987),l=(n(35776),n(3905)),r=n(91515),m=n(16556);const i=["components"],d={},s={_frontmatter:d},p=r.Z;function u(e){let{components:t}=e,n=(0,o.Z)(e,i);return(0,l.mdx)(p,(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,l.mdx)("h1",{id:"targetableesmodule"},"TargetableESModule"),(0,l.mdx)(m.Z,{mdxType:"Docs"}),(0,l.mdx)("h2",{id:"examples"},"Examples"),(0,l.mdx)("p",null,"Code examples for the ",(0,l.mdx)("inlineCode",{parentName:"p"},"TargetableESModule")," class."),(0,l.mdx)("h3",{id:"add-and-use-import-statements"},"Add and use import statements"),(0,l.mdx)("p",null,"Calling the ",(0,l.mdx)("inlineCode",{parentName:"p"},"addImport()")," function returns a ",(0,l.mdx)("a",{parentName:"p",href:"/commerce-pwa-studio/api/buildpack/targetables/SingleImportStatement/"},(0,l.mdx)("inlineCode",{parentName:"a"},"SingleImportStatement"))," object.\nUse this object to refer to the component in your code."),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-jsx"},"const logger = esModule.addImport('import logger from \"./logger\"');\nesModule.insertAfterSource(\"./logger';\\n\", `${logger.binding}('startup')`);\n")),(0,l.mdx)("p",null,"The ",(0,l.mdx)("inlineCode",{parentName:"p"},"SingleImportStatement")," class overrides its ",(0,l.mdx)("inlineCode",{parentName:"p"},"toString()")," method to return the value of its ",(0,l.mdx)("inlineCode",{parentName:"p"},".binding")," property,\nso you can use the object itself in your templates"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-jsx"},"const logger = esModule.addImport('import logger from \"./logger\"');\nesModule.insertAfterSource(\"./logger';\\n\", `${logger}('startup')`);\n")),(0,l.mdx)("h4",{id:"import-statement-limits"},"Import statement limits"),(0,l.mdx)("p",null,"The ",(0,l.mdx)("inlineCode",{parentName:"p"},"addImport()")," function can only handle import statements with a single binding."),(0,l.mdx)("p",null,"For example, the following code is allowed because it only binds ",(0,l.mdx)("inlineCode",{parentName:"p"},"VeniaButton")," in the statement:"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-js"},'import { Button as VeniaButton } from "@magento/venia/lib/components/Button";\n')),(0,l.mdx)("p",null,"The following would not be allowed, since it adds two bindings (",(0,l.mdx)("inlineCode",{parentName:"p"},"VeniaButton")," and ",(0,l.mdx)("inlineCode",{parentName:"p"},"Carousel"),"):"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-js"},'import { Button as VeniaButton, Carousel } from "@magento/venia";\n')),(0,l.mdx)("h4",{id:"import-conflicts"},"Import conflicts"),(0,l.mdx)("p",null,"A conflict occcurs when an import statement uses a binding that already belongs to another existing import statement.\nFor example, you add the ",(0,l.mdx)("inlineCode",{parentName:"p"},"logger")," import statement in a previous example to a file that already imports another ",(0,l.mdx)("inlineCode",{parentName:"p"},"logger")," module.\nWhen this happens, the ",(0,l.mdx)("inlineCode",{parentName:"p"},"TargetableESModule")," class rebinds the ",(0,l.mdx)("inlineCode",{parentName:"p"},"logger")," object to a different, unique name, such as ",(0,l.mdx)("inlineCode",{parentName:"p"},"logger$$2"),"."),(0,l.mdx)("h3",{id:"wrap-a-module"},"Wrap a module"),(0,l.mdx)("p",null,"Use the ",(0,l.mdx)("inlineCode",{parentName:"p"},"wrapWithFile()")," function to wrap an exported module with another module from a specified file."),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-js"},'// Create a TargetableESModule linked to the useProductFullDetail.js file\nconst useProductFullDetails = targetables.esModule(\n  "@magento/peregrine/lib/talons/ProductFullDetail/useProductFullDetail.js"\n);\n\n// Wrap the `useProductFullDetail` named export from the file with\n// the default export of `src/targets/wrapper.js` in the `myExtension` package.\nuseProductFullDetails.wrapWithFile(\n  "useProductFullDetail",\n  "myExtension/src/targets/wrapper"\n);\n')))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-api-buildpack-targetables-targetable-es-module-index-md-6e11b91ea6c55ff5436f.js.map